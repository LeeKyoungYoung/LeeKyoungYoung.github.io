import{u as f,r as j,j as e}from"./index--oy4d1LN.js";import{u as y,Q as U}from"./queryKey-C4OvowHP.js";import{u as N}from"./useMutation-BWXDtBTP.js";import{u as F,g as S}from"./project-DtPuMC7w.js";import{o as q}from"./board-CNwfHsRh.js";import{s as C}from"./Project.module-Dpi1qAxQ.js";import"./utils-km2FGkQ4.js";function E(){const p=f(),[t,i]=j.useState({semester:"",teamName:"",serviceName:"",content:"",gitHubUrl:"",serviceUrl:"",members:[""],imageUrl:""}),c=window.location.href,h=c.substring(c.lastIndexOf("/")+1),m=Number(h),s=y({queryKey:U.project.projectById(m),queryFn:async()=>S(m)});let n;const b=N({mutationFn:r=>F(r),onSuccess:async()=>{alert("프로젝트 수정 성공"),await p(-1)},onError:r=>{console.error("프로젝트 수정 실패:",r),alert("프로젝트 수정 실패")}});j.useEffect(()=>{s.isSuccess&&s.data&&i(r=>({...r,...s.data}))},[s.isSuccess,s.data]);const a=async r=>{const{name:u,value:d,files:l}=r.target;if(l&&l[0]){const o=l[0],x=await q(o);x&&i(v=>({...v,imageUrl:x}))}else i(o=>({...o,[u]:u==="members"?d.split(","):d}))},g=r=>{r.preventDefault(),b.mutate(t)};if(s.isLoading)n=e.jsx("div",{className:"loading",children:"데이터를 불러오는 중입니다..."});else if(s.isError)n=e.jsx("div",{className:"error",children:"에러가 발생했습니다!"});else if(s.isSuccess)return console.log(t),e.jsx("div",{className:C.container,children:e.jsxs("form",{onSubmit:g,children:[e.jsx("h1",{children:"프로젝트 게시글 수정"}),e.jsx("label",{htmlFor:"semester",children:"학기"}),e.jsx("input",{type:"text",id:"semester",name:"semester",placeholder:"진행된 학기를 입력하세요 (예: 24-2)",value:t.semester,onChange:a,required:!0}),e.jsx("br",{}),e.jsx("label",{htmlFor:"teamName",children:"팀 이름"}),e.jsx("input",{type:"text",id:"teamName",name:"teamName",placeholder:"팀 이름을 입력하세요",value:t.teamName,onChange:a,required:!0}),e.jsx("br",{}),e.jsx("label",{htmlFor:"title",children:"서비스 이름"}),e.jsx("input",{type:"text",id:"serviceName",name:"serviceName",placeholder:"서비스 이름을 입력하세요",value:t.serviceName,onChange:a,required:!0}),e.jsx("br",{}),e.jsx("label",{htmlFor:"content",children:"내용"}),e.jsx("input",{type:"text",id:"content",name:"content",placeholder:"내용을 입력하세요",value:t.content,onChange:a,required:!0}),e.jsx("br",{}),e.jsx("label",{htmlFor:"gitHubUrl",children:"GitHub 주소"}),e.jsx("input",{type:"text",id:"gitHubUrl",name:"gitHubUrl",placeholder:"깃허브 주소를 입력하세요",value:t.gitHubUrl,onChange:a,required:!0}),e.jsx("br",{}),e.jsx("label",{htmlFor:"serviceUrl",children:"서비스 URL"}),e.jsx("input",{type:"text",id:"serviceUrl",name:"serviceUrl",placeholder:"서비스 주소를 입력하세요",value:t.serviceUrl,onChange:a,required:!0}),e.jsx("br",{}),e.jsx("label",{htmlFor:"members",children:"팀원"}),e.jsx("input",{type:"text",id:"members",name:"members",placeholder:"팀원들의 이름을 입력하세요",value:t.members.join(","),onChange:a,required:!0}),e.jsx("br",{}),e.jsx("label",{htmlFor:"imageSelect",children:"이미지 선택"}),e.jsx("input",{type:"file",id:"imageSelect",name:"imageSelect",accept:"image/*",onChange:a}),e.jsx("br",{}),e.jsx("input",{type:"submit",value:"프로젝트 수정"})]})});return e.jsx("div",{children:n})}function A(){return e.jsx("div",{children:e.jsx(E,{})})}export{A as default};
