import{u as h,D as x,r as m,j as e}from"./index--oy4d1LN.js";import{a as j,c as v}from"./user-_cQGTHPF.js";import{s as a}from"./UserPage.module-5F34UAF7.js";function N(){const u=h(),{name:d,imgUrl:g,setUser:t}=x(),[f,o]=m.useState(null),[n,i]=m.useState(null),U=async s=>{var c;const l=(c=s.target.files)==null?void 0:c[0];if(l)try{const r=await j(l);console.log("받은 이미지 URL:",r),o(URL.createObjectURL(l)),i(r)}catch(r){console.error("이미지 업로드 실패:",r)}},p=async()=>{if(!n)return alert("이미지를 먼저 업로드하세요.");try{const s=await v(n);console.log("최종 반영된 이미지 URL:",s),t({imgUrl:s}),o(null),i(null),u(`/user/${d}`)}catch(s){t({imgUrl:""}),console.error("프로필 이미지 변경 실패:",s)}};return e.jsxs("div",{className:a.container,children:[e.jsx("div",{className:a.title,children:"프로필 사진 수정"}),e.jsx("div",{className:a.image,children:e.jsx("img",{src:f||g,alt:"유저 이미지",className:a.preview})}),e.jsxs("div",{className:a.buttons,children:[e.jsx("input",{id:"file-upload",type:"file",accept:"image/*",className:a.fileUpload,onChange:U}),e.jsx("label",{htmlFor:"file-upload",className:a.fileLabel,children:"이미지 선택"}),e.jsx("button",{onClick:p,className:a.confirmbutton,children:"확인"})]})]})}function w(){return e.jsx(N,{})}export{w as default};
