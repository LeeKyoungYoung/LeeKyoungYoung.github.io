import{r as m,j as e,L as g}from"./index--oy4d1LN.js";import{u as _,Q as p}from"./queryKey-C4OvowHP.js";import{g as x,a as h}from"./board-CNwfHsRh.js";import{C as B}from"./category_strings-DojXDTDK.js";import{C as u,g as f}from"./comment-CQBf1myx.js";import{P as w}from"./Pagination-BwCYWqyu.js";const C="_profile_14w8m_101",n={"board-item-container":"_board-item-container_14w8m_1","board-user-name":"_board-user-name_14w8m_17","board-info":"_board-info_14w8m_33","comment-img":"_comment-img_14w8m_47","temp-link":"_temp-link_14w8m_57","board-title":"_board-title_14w8m_69","board-content":"_board-content_14w8m_87",profile:C},j="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEvSURBVHgBrZJPToNAFIffzIBxYWKPAAvUtiS2N6BrrMoN6gnEE9Ab9AreoMbCOWRBEGQB3oBuBWYE1EbjgMXwLSa/eW/yZf4B9ABqapytnyX4g8AYJo0S1YksxJDJoNi2a3DsXSgzgdtjoBWIznz91G1TqHaY1KqmBfStSGFP6p2M7cgsz3VV5TzLb6AjtaQUWHkmTKscGEqi2lEXx4eEAUsDQ07gn2DoAe7rMKBbIhJL3YSvvD5lKPEvT+5bJWJ2sChIoQGhA14fM3Q7tl/Oy3S8K5aFGPZg5HiTr6xuomX5AOzXTqT10+BIOJzwBAiDxChZlFGr5t5cWY6c+OGHZPgYXgsErRiFpntIRSyY32u+Lrs7CQIkCRivCBDDncutX50H/hzuSEamrt5d0BvvePxh0EU0o04AAAAASUVORK5CYII=",v="https://lkyoung-bucket.s3.ap-northeast-2.amazonaws.com/user/88778c10-2e63-49c4-bfd9-46c1c79e191d";function b({board:s,category:t}){var i;const[a,c]=m.useState(null);return m.useEffect(()=>{(async()=>{try{const o=await f(s.id);c(o)}catch(o){console.error("댓글 수를 가져오는 중 오류 발생:",o)}})()},[s.id]),console.log("board.createdAt:",s.createdAt),console.log(s),e.jsx(g,{to:`${u[t]}/view/${s.id}`,className:n["temp-link"],children:e.jsxs("div",{className:n["board-item-container"],children:[e.jsxs("div",{children:[e.jsx("img",{src:s.resUserDetailDto.imgUrl?s.resUserDetailDto.imgUrl:v,className:n.profile}),e.jsxs("div",{className:n["board-user-name"],children:[s.resUserDetailDto.name,e.jsxs("div",{className:n["board-info"],children:[e.jsx("span",{children:(i=s.createdAt)==null?void 0:i.toString().substring(0,10)}),e.jsx("span",{children:e.jsx("img",{src:j,className:n["comment-img"]})}),e.jsx("span",{style:{color:"#2CB4DB"},children:a!==null?a:"로딩 중"})]})]}),e.jsx("div",{className:n["board-title"],children:e.jsx("div",{className:n["board-title"],children:s.title})})]}),e.jsx("div",{className:n["board-content"],children:s.content})]})})}const N="_container_yzw8p_1",y="_title_yzw8p_79",E="_boardList_yzw8p_95",S="_noBoards_yzw8p_141",z="_loading_yzw8p_155",U="_error_yzw8p_163",I="_spacer_yzw8p_187",R="_divider_yzw8p_229",r={container:N,title:y,boardList:E,"board-wrapper":"_board-wrapper_yzw8p_115",noBoards:S,loading:z,error:U,"board-list-footer":"_board-list-footer_yzw8p_171",spacer:I,"write-link":"_write-link_yzw8p_195",divider:R};function Y({category:s,boardsQuery:t,totalPages:a,currentPage:c,onPageChange:i}){const d=()=>{if(a===0)return e.jsx("div",{className:r.noBoards,children:"현재 게시물이 없습니다."});if(t.isLoading)return e.jsx("div",{className:r.loading,children:"데이터를 불러오는 중입니다..."});if(t.isError)return e.jsx("div",{className:r.error,children:"에러가 발생했습니다!"});if(t.isSuccess)return t.data.filter(o=>o.id!==void 0).map((o,l)=>e.jsxs("div",{children:[e.jsx("div",{className:r["board-wrapper"],children:e.jsx(b,{board:o,category:s})}),l<t.data.length-1&&e.jsx("div",{className:r.divider})]},`board-${o.id}`))};return e.jsxs("div",{className:r.container,children:[e.jsxs("h2",{className:r.title,children:[B[s]," 게시판"]}),e.jsx("div",{className:r.boardList,children:d()}),e.jsxs("div",{className:r["board-list-footer"],children:[e.jsx("div",{className:r.spacer}),e.jsx(w,{totalPages:a,currentPage:c,onPageChange:i}),e.jsx(g,{className:r["write-link"],to:`/${u[s]}/write`,children:"글쓰기"})]})]})}function K({category:s}){var A;const[t,a]=m.useState(0),c=10,i=_({queryKey:p.board.boardsCount(s),queryFn:async()=>x(s)}),d=_({queryKey:p.board.boards(s,t),queryFn:async()=>h(s,t)}),o=((A=i.data)==null?void 0:A.length)??0,l=Math.ceil(o/c);return e.jsx(Y,{category:s,boardsQuery:d,totalPages:l,currentPage:t,onPageChange:a})}export{K as B};
